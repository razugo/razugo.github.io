---
title: PokerTracker - Dashboard
nav_id: dashboard
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover" />
    <title>{{ page.title | default: "PokerTracker" }}</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="styles/main.css">
  </head>
  <body>
    {% include_relative components/nav-bar.html %}
    <main>
      <div class="container">
      <h1>Dashboard</h1>

      <!-- Overall Stats -->
      <div class="stats-grid" id="statsGrid">
        <!-- Populated by JavaScript -->
      </div>

      <!-- Recent Sessions -->
      <div class="card">
        <div class="card-header">
          <h2 class="card-title">Recent Sessions</h2>
          <a href="/projects/poker_tracker/sessions" class="btn btn-outline btn-sm">View All</a>
        </div>
        <div class="card-content">
          <div class="recent-sessions-table-wrapper desktop-view">
            <div class="table-container recent-sessions-table-container">
                <table class="table recent-sessions-table">
                  <thead>
                    <tr>
                      <th>Date</th>
                      <th>Game</th>
                      <th class="col-duration">Duration</th>
                      <th class="col-vpip">VPIP</th>
                      <th class="col-hands">Hands</th>
                      <th>P&L</th>
                    </tr>
                  </thead>
                <tbody id="recentSessionsTableBody">
                  <!-- Populated by JavaScript -->
                </tbody>
              </table>
            </div>
          </div>
          <div class="recent-sessions-cards mobile-view" id="recentSessionsCards">
            <!-- Populated by JavaScript -->
          </div>
        </div>
      </div>

      <!-- Bankroll Chart -->
      <div class="card" style="margin-top: 2rem;">
        <div class="card-header">
          <h2 class="card-title">Bankroll Progress</h2>
        </div>
        <div class="card-content">
          <div class="chart-container">
            <canvas id="bankrollChart"></canvas>
          </div>
        </div>
      </div>
      </div>
      <script>
        document.addEventListener('DOMContentLoaded', function() {
          populateStats();
          populateRecentSessions();
          createBankrollChart();
          window.addEventListener('resize', updateRecentSessionsResponsiveState);
        });

        function populateStats() {
          const stats = PokerTracker.DataStore.getSessionStats();
          const statsGrid = document.getElementById('statsGrid');

          statsGrid.innerHTML = `
            <div class="stat-card">
              <div class="stat-value ${stats.totalProfit >= 0 ? 'positive' : 'negative'}">${stats.totalProfit >= 0 ? '+' : ''}${PokerTracker.Utils.formatCurrency(stats.totalProfit)}</div>
              <div class="stat-label">Total Profit</div>
            </div>
            <div class="stat-card">
              <div class="stat-value">${stats.totalSessions}</div>
              <div class="stat-label">Total Sessions</div>
            </div>
            <div class="stat-card">
              <div class="stat-value">${stats.totalHands.toLocaleString()}</div>
              <div class="stat-label">Hands Played</div>
            </div>
            <div class="stat-card">
              <div class="stat-value">${stats.winRate}%</div>
              <div class="stat-label">Win Rate</div>
            </div>
            <div class="stat-card">
              <div class="stat-value ${stats.hourlyRate >= 0 ? 'positive' : 'negative'}">${stats.hourlyRate >= 0 ? '+' : ''}${PokerTracker.Utils.formatCurrency(stats.hourlyRate)}</div>
              <div class="stat-label">$ / Hour</div>
            </div>
            <div class="stat-card">
              <div class="stat-value">${stats.avgVpip}%</div>
              <div class="stat-label">Avg VPIP</div>
            </div>
          `;
        }

        function populateRecentSessions() {
          const sessions = PokerTracker.DataStore.getSessions();
          const tbody = document.getElementById('recentSessionsTableBody');
          const cardsContainer = document.getElementById('recentSessionsCards');

          const ordered = sessions
            .slice()
            .sort((a, b) => PokerTracker.DataStore.getSessionSortValue(b) - PokerTracker.DataStore.getSessionSortValue(a))
            .slice(0, 3);

          if (tbody) {
            tbody.innerHTML = ordered.map(session => {
              const game = PokerTracker.DataStore.getGame(session.gameId);
              const profit = (session.cashOut || 0) - (session.buyIn || 0);
              const handsCount = session.total || 0;
              const vpipValue = typeof session.vpip === 'number' ? session.vpip : 0;
              const hasHands = handsCount > 0;
              const sessionDate = PokerTracker.DataStore.getSessionDate(session);

              let durationMinutes = 0;
              if (typeof session.durationHours === 'number' && Number.isFinite(session.durationHours) && session.durationHours > 0) {
                durationMinutes = session.durationHours * 60;
              } else if (session.startTime && session.endTime) {
                const start = new Date(session.startTime);
                const end = new Date(session.endTime);
                if (!Number.isNaN(start.getTime()) && !Number.isNaN(end.getTime())) {
                  durationMinutes = Math.max(0, (end.getTime() - start.getTime()) / (1000 * 60));
                }
              } else if (session.startTime) {
                const start = new Date(session.startTime);
                if (!Number.isNaN(start.getTime())) {
                  durationMinutes = Math.max(0, (Date.now() - start.getTime()) / (1000 * 60));
                }
              } else if (handsCount > 0) {
                durationMinutes = handsCount * 2;
              }

              return `
                <tr>
                  <td>${sessionDate || '-'}</td>
                  <td>${game?.name || '-'}</td>
                  <td class="col-duration">${durationMinutes > 0 ? PokerTracker.Utils.formatDuration(Math.round(durationMinutes)) : '-'}</td>
                  <td class="col-vpip">${hasHands ? `${vpipValue.toFixed(1)}%` : '-'}</td>
                  <td class="col-hands">${handsCount}</td>
                  <td class="${profit >= 0 ? 'positive' : 'negative'}">${profit >= 0 ? '+' : ''}${PokerTracker.Utils.formatCurrency(profit)}</td>
                </tr>
              `;
            }).join('');
          }

          if (cardsContainer) {
            cardsContainer.innerHTML = ordered.map(session => {
              const game = PokerTracker.DataStore.getGame(session.gameId);
              const profit = (session.cashOut || 0) - (session.buyIn || 0);
              const sessionDate = PokerTracker.DataStore.getSessionDate(session);
              const baseName = session.name || game?.name || 'Session';
              const handsCount = session.total || 0;
              const hasHands = handsCount > 0;
              const vpipValue = typeof session.vpip === 'number' ? session.vpip.toFixed(1) : '0.0';

              return `
                <div class="session-card">
                  <div class="session-card-content">
                    <div class="session-card-top">
                      <span class="session-card-title">${baseName}</span>
                      <span class="session-card-game">${game?.name || '-'}</span>
                    </div>
                    <div class="session-card-bottom">
                      <span class="session-card-date">${sessionDate || '-'}</span>
                      <span class="session-card-meta">${hasHands ? `${vpipValue}% VPIP` : '-'}</span>
                      <span class="session-card-pnl ${profit >= 0 ? 'positive' : 'negative'}">
                        ${profit >= 0 ? '+' : ''}${PokerTracker.Utils.formatCurrency(profit)}
                      </span>
                    </div>
                  </div>
                </div>
              `;
            }).join('');
          }

          updateRecentSessionsResponsiveState();
        }

        function createBankrollChart() {
          const ctx = document.getElementById('bankrollChart').getContext('2d');
          const sessions = PokerTracker.DataStore.getSessions();

          // Get the same recent sessions that are displayed in the table (latest 3)
          const recentSessions = sessions
            .slice()
            .sort((a, b) => PokerTracker.DataStore.getSessionSortValue(b) - PokerTracker.DataStore.getSessionSortValue(a))
            .slice(0, 3);

          // Sort them chronologically for the chart (oldest to newest)
          const sortedRecentSessions = recentSessions
            .slice()
            .sort((a, b) => PokerTracker.DataStore.getSessionSortValue(a) - PokerTracker.DataStore.getSessionSortValue(b));

          if (sortedRecentSessions.length === 0) {
            // Show empty chart
            new Chart(ctx, {
              type: 'line',
              data: {
                labels: ['Start'],
                datasets: [{
                  label: 'Cumulative P&L',
                  data: [0],
                  borderColor: '#3b82f6',
                  backgroundColor: 'rgba(59, 130, 246, 0.1)',
                  fill: true,
                  tension: 0.1
                }]
              },
              options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                  y: {
                    beginAtZero: true,
                    ticks: {
                      callback: function(value) {
                        return '$' + value;
                      }
                    }
                  }
                }
              }
            });
            return;
          }

          // Calculate cumulative P&L for recent sessions
          let cumulative = 0;
          const cumulativeData = [];
          const labels = [];

          cumulativeData.push(0); // Start at 0
          labels.push('Start');

          sortedRecentSessions.forEach((session, index) => {
            const profit = (session.cashOut || 0) - (session.buyIn || 0);
            cumulative += profit;
            cumulativeData.push(cumulative);

            // Use session name or game name or date for better labels
            const game = PokerTracker.DataStore.getGame(session.gameId);
            const sessionDate = PokerTracker.DataStore.getSessionDate(session);
            const labelName = session.name || game?.name || sessionDate || `Session ${index + 1}`;
            labels.push(labelName);
          });

          new Chart(ctx, {
            type: 'line',
            data: {
              labels: labels,
              datasets: [{
                label: 'Cumulative P&L',
                data: cumulativeData,
                borderColor: '#3b82f6',
                backgroundColor: 'rgba(59, 130, 246, 0.1)',
                fill: true,
                tension: 0.1
              }]
            },
            options: {
              responsive: true,
              maintainAspectRatio: false,
              scales: {
                y: {
                  ticks: {
                    callback: function(value) {
                      return '$' + value;
                    }
                  }
                }
              }
            }
          });
        }

        function updateRecentSessionsResponsiveState() {
          const tableEl = document.querySelector('.recent-sessions-table');
          if (!tableEl) return;

          const containerEl = tableEl.closest('.recent-sessions-table-container');
          const hideHands = window.matchMedia('(max-width: 1100px)').matches;
          const hideDuration = window.matchMedia('(max-width: 900px)').matches;
          const hideVpip = window.matchMedia('(max-width: 1000px)').matches;

          tableEl.dataset.hideHands = hideHands ? 'true' : 'false';
          tableEl.dataset.hideDuration = hideDuration ? 'true' : 'false';
          tableEl.dataset.hideVpip = hideVpip ? 'true' : 'false';

          if (containerEl) {
            containerEl.classList.toggle('scrollable', tableEl.scrollWidth > containerEl.clientWidth);
          }
        }

      </script>
      <!-- Shared JavaScript -->
      <script src="assets/js/data-store.js"></script>
      <script src="assets/js/app.js"></script>
    </main>

    {% include_relative components/new-session-modal.html %}
    {% include_relative components/new-game-modal.html %}
  </body>
</html>
