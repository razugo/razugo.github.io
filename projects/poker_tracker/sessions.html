---
title: PokerTracker - Sessions
nav_id: sessions
---

<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover" />
  <title>{{ page.title | default: "PokerTracker" }}</title>
  <link rel="stylesheet" href="styles/main.css">
</head>
<body>
  {% include_relative components/nav-bar.html %}

  <main>
    <div class="container">
  <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
    <h1>Sessions</h1>
    <div style="display: flex; gap: 1rem;">
      <button class="btn" onclick="goToActiveSession()" id="liveSessionBtn">Live</button>
      <button class="btn btn-primary" onclick="PokerTracker.Modal.showNewSessionModal()">+ New Session</button>
    </div>
  </div>

  <!-- Filters -->
  <div class="filters">
    <input type="text" class="filter-input" placeholder="Search sessions..." id="sessionSearch">
    <select class="filter-input" id="gameFilter">
      <option value="">All Games</option>
      <option value="aria-1-3">Aria 1/3</option>
      <option value="home-game">Home Game</option>
      <option value="bellagio-2-5">Bellagio 2/5</option>
      <option value="wynn-5-10">Wynn 5/10</option>
      <option value="commerce-3-5">Commerce 3/5</option>
    </select>
    <div class="date-filter-group">
      <label class="filter-label">From Date</label>
      <input type="date" class="filter-input" id="dateFrom">
    </div>
    <div class="date-filter-group">
      <label class="filter-label">To Date</label>
      <input type="date" class="filter-input" id="dateTo">
    </div>
    <select class="filter-input" id="profitFilter">
      <option value="">All Results</option>
      <option value="positive">Winning Sessions</option>
      <option value="negative">Losing Sessions</option>
    </select>
  </div>

  <!-- Sessions Table -->
  <div class="card">
    <div class="card-content">
      <div class="table-container">
        <table class="table">
        <thead>
          <tr>
            <th>Date</th>
            <th>Game</th>
            <th>Duration</th>
            <th>Buy-in</th>
            <th>Cash-out</th>
            <th>P&L</th>
            <th>Hands</th>
            <th>VPIP</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="sessionsTableBody">
          <!-- Populated by JavaScript -->
        </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    populateSessionsTable();
    setupFilters();
    checkActiveSession();
  });

  function populateSessionsTable() {
    const sessions = PokerTracker.DataStore.getSessions();
    const tbody = document.getElementById('sessionsTableBody');

    tbody.innerHTML = sessions.map(session => {
      const game = PokerTracker.DataStore.getGame(session.gameId);
      const profit = (session.cashOut || 0) - (session.buyIn || 0);

      // Get hands count and VPIP directly from session
      const handsCount = session.total || 0;
      const vpip = (session.vpip || 0).toFixed(1);

      // Calculate duration from start/end time or estimate
      let duration = 0;
      if (session.startTime && session.endTime) {
        duration = Math.round((new Date(session.endTime) - new Date(session.startTime)) / (1000 * 60));
      } else if (session.startTime) {
        duration = Math.round((new Date() - new Date(session.startTime)) / (1000 * 60));
      } else if (handsCount > 0) {
        duration = handsCount * 2; // Estimate 2 minutes per hand
      }

      return `
        <tr>
          <td>${session.date}</td>
          <td>${game?.name || 'Unknown'}</td>
          <td>${duration > 0 ? PokerTracker.Utils.formatDuration(duration) : '-'}</td>
          <td>${PokerTracker.Utils.formatCurrency(session.buyIn || 0)}</td>
          <td>${PokerTracker.Utils.formatCurrency(session.cashOut || 0)}</td>
          <td class="${profit >= 0 ? 'positive' : 'negative'}">${profit >= 0 ? '+' : ''}${PokerTracker.Utils.formatCurrency(profit)}</td>
          <td>${handsCount}</td>
          <td>${vpip}%</td>
          <td>
            <div class="session-actions">
              <button class="btn btn-outline btn-sm desktop-action" onclick="viewSession('${session.id}')">View</button>
              <button class="btn btn-outline btn-sm desktop-action" onclick="editSession('${session.id}')" style="margin-left: 0.5rem;">Edit</button>
              <button class="btn btn-outline btn-sm desktop-action" onclick="deleteSession('${session.id}')" style="margin-left: 0.5rem;">Delete</button>
              <div class="mobile-action">
                <button class="action-menu-btn" onclick="toggleActionMenu(this, '${session.id}')">â‹®</button>
                <div class="action-menu">
                  <button onclick="viewSession('${session.id}')">View</button>
                  <button onclick="editSession('${session.id}')">Edit</button>
                  <button onclick="deleteSession('${session.id}')">Delete</button>
                </div>
              </div>
            </div>
          </td>
        </tr>
      `;
    }).join('');
  }

  function deleteSession(sessionId) {
    const session = PokerTracker.DataStore.getSession(sessionId);
    if (!session) {
      alert('Session not found');
      return;
    }

    const handsCount = session.total || 0;

    if (confirm(`Are you sure you want to delete this session? This will permanently delete ${handsCount} hands and cannot be undone.`)) {
      PokerTracker.DataStore.deleteSession(sessionId);
      alert('Session deleted successfully!');
      populateSessionsTable();
      checkActiveSession();
    }
  }

  function setupFilters() {
    // Add filter functionality here
    const filters = ['sessionSearch', 'gameFilter', 'dateFrom', 'dateTo', 'profitFilter'];
    filters.forEach(filterId => {
      document.getElementById(filterId).addEventListener('change', applyFilters);
      document.getElementById(filterId).addEventListener('input', applyFilters);
    });
  }

  function applyFilters() {
    // Filter implementation would go here
    console.log('Applying filters...');
  }

  function viewSession(sessionId) {
    window.location.href = `/projects/poker_tracker/session?session_id=${sessionId}`;
  }

  function editSession(sessionId) {
    PokerTracker.SessionModal.showSessionSettingsModal(sessionId);
  }

  function goToActiveSession() {
    const activeSession = PokerTracker.DataStore.getActiveSession();
    if (activeSession) {
      window.location.href = `/projects/poker_tracker/session?session_id=${activeSession.id}`;
    }
  }

  function checkActiveSession() {
    const activeSession = PokerTracker.DataStore.getActiveSession();
    const liveSessionBtn = document.getElementById('liveSessionBtn');

    if (activeSession) {
      liveSessionBtn.className = 'btn btn-live-active';
      liveSessionBtn.disabled = false;
      liveSessionBtn.textContent = 'Live';
    } else {
      liveSessionBtn.className = 'btn btn-live-disabled';
      liveSessionBtn.disabled = true;
      liveSessionBtn.textContent = 'Live';
    }
  }
</script>

<!-- Shared JavaScript -->
<script src="assets/js/data-store.js"></script>
<script src="assets/js/app.js"></script>

<script>
  function quickAction() {
    alert('Quick Action - Could start new session, add hand, or quick access menu');
  }


  function toggleActionMenu(button, sessionId) {
    const menu = button.nextElementSibling;
    const isOpen = menu.style.display === 'block';

    // Close all other action menus
    document.querySelectorAll('.action-menu').forEach(m => {
      m.style.display = 'none';
      // Reset positioning
      m.style.position = 'absolute';
      m.style.bottom = '100%';
      m.style.top = 'auto';
      m.style.right = '0';
      m.style.left = 'auto';
      m.style.marginBottom = '0.25rem';
      m.style.marginTop = '0';
    });

    if (!isOpen) {

      // Use fixed positioning to ensure menu is always visible
      menu.style.position = 'fixed';
      menu.style.display = 'block';

      // Get button position
      const buttonRect = button.getBoundingClientRect();
      const menuWidth = 100; // Approximate menu width
      const menuHeight = 90; // Approximate menu height (3 buttons * 30px each)

      const viewportHeight = window.innerHeight;
      const viewportWidth = window.innerWidth;

      // Calculate optimal position
      let top, left;

      // Try to position above the button first
      if (buttonRect.top - menuHeight - 10 > 0) {
        top = buttonRect.top - menuHeight - 5;
      } else {
        // Position below the button
        top = buttonRect.bottom + 5;
      }

      // Position to the right of the button, but ensure it stays in viewport
      left = Math.min(buttonRect.right - menuWidth, viewportWidth - menuWidth - 10);
      left = Math.max(10, left); // Ensure at least 10px from left edge

      menu.style.top = `${top}px`;
      menu.style.left = `${left}px`;
      menu.style.right = 'auto';
      menu.style.bottom = 'auto';
      menu.style.margin = '0';
    }
  }

  // Close action menus when clicking outside
  document.addEventListener('click', function(e) {
    if (!e.target.closest('.mobile-action')) {
      document.querySelectorAll('.action-menu').forEach(m => m.style.display = 'none');
    }
  });
</script>

{% include_relative components/new-session-modal.html %}
{% include_relative components/new-game-modal.html %}
{% include_relative components/session-settings-modal.html %}

    </div>
  </main>
</body>
</html>